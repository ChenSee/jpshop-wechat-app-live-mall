<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>支付宝回调</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="start/layui/css/layui.css" media="all">
    <link rel="stylesheet" type="text/css" href="start/layui/icon/icon.css">
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="./src/lib/common.js"></script>
</head>
<body>
<div class="layui-fluid">
    <div class="layui-col-md12">
        <div class="layui-input-inline">
            稍后本页面将自动关闭...
        </div>
    </div>
</div>
</body>
</html>
<script>
    var url = 'http://192.168.188.12/merchantPayVipAli';//本地
    // var url = 'https://api.juanpao.com/merchantPayVipAli';//服务器
    var str = window.location.search.substring(1);
    var key_value = str.split('&');
    var subData = {};
    for (var i = 0; i < key_value.length; i++) {
        var str_i = key_value[i];
        str_i = str_i.split('=');
        subData[str_i[0]] = str_i[1];
    }

    $.ajax({
        url: url,
        data: subData,
        type: "post",
        success: function (res) {
            if (typeof res == 'string') {
                res = eval('(' + res + ')');
            }
            if (res.status !== 200) {
                alert(res.message);
                return false;
            }
            window.opener.location.reload();
            window.close();
        },
        error: function () {
            alert('出错啦');
        }
    });
</script>


