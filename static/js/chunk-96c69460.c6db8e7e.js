(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96c69460"],{9671:function(e,t,a){"use strict";a.d(t,"j",(function(){return n})),a.d(t,"f",(function(){return s})),a.d(t,"n",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"i",(function(){return l})),a.d(t,"q",(function(){return u})),a.d(t,"g",(function(){return o})),a.d(t,"o",(function(){return d})),a.d(t,"e",(function(){return m})),a.d(t,"d",(function(){return p})),a.d(t,"h",(function(){return v})),a.d(t,"l",(function(){return h})),a.d(t,"p",(function(){return f})),a.d(t,"a",(function(){return g})),a.d(t,"k",(function(){return b})),a.d(t,"m",(function(){return _})),a.d(t,"r",(function(){return y})),a.d(t,"c",(function(){return x}));var r=a("b775");function n(e){return Object(r["a"])({url:"/merchantTuanUser",method:"get",params:e})}function s(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantLeaderGoods/"+t,method:"get",params:e})}function i(e){var t=e.id;return delete e.id,Object(r["a"])({url:"merchantLeaderGoods/"+t,method:"put",data:e})}function c(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantTuanUserUntying/"+t,method:"delete",data:e})}function l(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantTuanUser/"+t,method:"get",params:e})}function u(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantTuanUsers/"+t,method:"put",data:e})}function o(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantLeagueMember/"+t,method:"get",params:e})}function d(e){return Object(r["a"])({url:"/merchantLeagueMember",method:"put",data:e})}function m(e){return Object(r["a"])({url:"/merchantTuanUser",method:"get",params:e})}function p(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantTuanUser/"+t,method:"put",data:e})}function v(e){return Object(r["a"])({url:"/merchantLeaderLevel",method:"get",params:e})}function h(e){return Object(r["a"])({url:"/merchantLeaderLevel",method:"post",data:e})}function f(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantLeaderLevel/"+t,method:"put",data:e})}function g(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantLeaderLevel/"+t,method:"delete",data:e})}function b(e){return Object(r["a"])({url:"/merchantWarehouse",method:"get",params:e})}function _(e){return Object(r["a"])({url:"/merchantWarehouse",method:"post",data:e})}function y(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantWarehouse/"+t,method:"put",data:e})}function x(e){var t=e.id;return delete e.id,Object(r["a"])({url:"/merchantWarehouse/"+t,method:"delete",data:e})}},"9e51":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customers-leave-container"},[e._m(0),e._v(" "),a("el-row",{staticClass:"customers-leave-row"},[a("el-col",{staticClass:"customers-leave-row-col",staticStyle:{"text-align":"left","padding-left":"15px"},attrs:{span:14}},[a("el-button",{staticStyle:{padding:"8px 30px"},attrs:{type:"primary",size:"small"},on:{click:e.add}},[e._v("新 增")])],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right","padding-right":"40px"},attrs:{span:10}},[a("el-input",{staticStyle:{"max-width":"240px"},attrs:{placeholder:"请输入名称",size:"small"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("el-button",{staticClass:"search-button",attrs:{slot:"suffix",type:"text",size:"small"},on:{click:e.search},slot:"suffix"},[a("i",{staticClass:"el-icon-search"})])],1)],1)],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.leaveList,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"等级名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"min_exp",label:"等级经验",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reward_ratio",label:"奖励比例(%)",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"format_create_time",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","active-value":"1","inactive-value":"0"},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"action-button",attrs:{type:"text"},on:{click:function(a){return e.eidt(t.row)}}},[a("i",{staticClass:"el-icon-edit"})]),e._v(" "),a("el-button",{staticClass:"action-button",attrs:{type:"text"},on:{click:function(a){return e.del(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"shanchu"}})],1)]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"15px 15px"}},[a("el-pagination",{staticClass:"page",attrs:{background:"",layout:"total, prev, pager, next, jumper",total:e.count,"page-size":10,"current-page":e.page},on:{"size-change":e.changePage,"current-change":e.changePage}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.disAddLeave,width:"30%",title:e.isAdd?"新增":"修改"},on:{"update:visible":function(t){e.disAddLeave=t}}},[e.disAddLeave?a("add-leave",{attrs:{isAdd:e.isAdd,leaveData:e.leaveData},on:{success:function(t){e.disAddLeave=!1,e.getLeaveList()}}}):e._e()],1)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customers-leave-label"},[a("div",[e._v("\n      团长等级规则：按照经验值计算等级，上月经验值到下月1日会折损50%，每月16日计算等级\n    ")]),e._v(" "),a("div",[e._v("\n      如：上月累计经验值10000，到本月1日会折损为5000，到16日计算的是5000+本月累计的经验值，进行升降级\n    ")])])}],s=(a("7f7f"),a("9671")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"addleaveform",attrs:{rules:e.addRules,model:e.leaveData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"等级名称",prop:"name"}},[a("el-input",{staticStyle:{"max-width":"70%"},attrs:{placeholder:"请输入等级名称",size:"small"},model:{value:e.leaveData.name,callback:function(t){e.$set(e.leaveData,"name",t)},expression:"leaveData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"等级经验",prop:"min_exp"}},[a("el-input",{staticStyle:{"max-width":"70%"},attrs:{placeholder:"请输入等级经验",size:"small"},model:{value:e.leaveData.min_exp,callback:function(t){e.$set(e.leaveData,"min_exp",e._n(t))},expression:"leaveData.min_exp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"奖励比例(%)",prop:"reward_ratio"}},[a("el-input",{staticStyle:{"max-width":"70%"},attrs:{placeholder:"请输入奖励比例",size:"small"},model:{value:e.leaveData.reward_ratio,callback:function(t){e.$set(e.leaveData,"reward_ratio",e._n(t))},expression:"leaveData.reward_ratio"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-switch",{attrs:{"active-color":"#13ce66","active-value":"1","inactive-value":"0"},model:{value:e.leaveData.status,callback:function(t){e.$set(e.leaveData,"status",t)},expression:"leaveData.status"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{padding:"8px 30px"},attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("提 交")])],1)],1)},c=[],l=a("4360"),u={name:"addLeave",props:{isAdd:{type:Boolean,required:!0,default:!0},leaveData:{type:Object,default:function(){return{key:l["a"].state.app.activeApp.saa_key,type:2,min_exp:"",name:"",reward_ratio:"",status:"1"}}}},data:function(){return{addRules:{name:[{required:!0,message:"请输入等级名称",trigger:"blur"}],min_exp:[{required:!0,message:"请输入等级经验",trigger:"blur"},{type:"number",message:"等级经验必须为数字",trigger:"blur"}],reward_ratio:[{required:!0,message:"请输入奖励比例",trigger:"blur"},{type:"number",message:"奖励比例必须为数字",trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs.addleaveform.validate((function(t){t&&(e.isAdd?Object(s["l"])(e.leaveData).then((function(t){200===t.status?(e.$emit("success"),e.$message.success("添加成功！")):e.$message.error(t.message)})):(console.log(e.leaveData),Object(s["p"])(e.leaveData).then((function(t){200===t.status?(e.$emit("success"),e.$message.success("修改成功！")):e.$message.error(t.message)}))))}))}}},o=u,d=a("2877"),m=Object(d["a"])(o,i,c,!1,null,null,null),p=m.exports,v={name:"customersLeave",components:{addLeave:p},data:function(){return{page:1,count:1,leaveList:[],searchName:"",disAddLeave:!1,isAdd:!0,leaveData:{key:this.$store.state.app.activeApp.saa_key,type:2,min_exp:"",name:"",reward_ratio:"",status:"1"}}},mounted:function(){this.getLeaveList()},methods:{getLeaveList:function(){var e=this,t={key:this.$store.state.app.activeApp.saa_key,type:2,page:this.page,limit:10};Object(s["h"])(t).then((function(t){200===t.status?(e.leaveList=t.data,e.count=parseInt(t.count)):204===t.status?(e.leaveList=[],e.count=1):e.$message.error(t.message)}))},changeStatus:function(e){var t=this,a={key:this.$store.state.app.activeApp.saa_key,id:e.id,status:e.status};Object(s["p"])(a).then((function(e){200===e.status?t.$message.success("修改成功！"):t.$message.error(e.message)}))},del:function(e){var t=this,a={key:this.$store.state.app.activeApp.saa_key,id:e.id};Object(s["a"])(a).then((function(e){200===e.status?(t.getLeaveList(),t.$message.success("删除成功！")):t.$message.error(e.message)}))},add:function(){this.leaveData={key:this.$store.state.app.activeApp.saa_key,type:2,min_exp:"",name:"",reward_ratio:"",status:"1"},this.disAddLeave=!0,this.isAdd=!0},eidt:function(e){this.leaveData={key:this.$store.state.app.activeApp.saa_key,type:2,min_exp:parseInt(e.min_exp),name:e.name,reward_ratio:parseFloat(e.reward_ratio),status:e.status,id:e.id},this.disAddLeave=!0,this.isAdd=!1},changePage:function(e){this.page=e,this.getLeaveList()},search:function(){var e=this,t={key:this.$store.state.app.activeApp.saa_key,type:2,page:1,limit:10,searchName:this.searchName};Object(s["h"])(t).then((function(t){200===t.status?(e.leaveList=t.data,e.count=parseInt(t.count)):204===t.status?(e.leaveList=[],e.count=1):e.$message.error(t.message)}))}}},h=v,f=(a("c2ca"),Object(d["a"])(h,r,n,!1,null,"4ee6d96e",null));t["default"]=f.exports},b558:function(e,t,a){},c2ca:function(e,t,a){"use strict";var r=a("b558"),n=a.n(r);n.a}}]);