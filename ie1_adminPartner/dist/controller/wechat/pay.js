/** layuiAdmin.pro-v1.0.0-beta7 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(function(e){layui.use(["jquery","form","admin","setter"],function(){var e,a,t,n,s=layui.$,l=layui.form,r=layui.admin,i=layui.setter,y=i.baseUrl,u=i.successMsg,o=i.errorMsg,c=i.timeOutCode,d=i.timeOutMsg,f={"Access-Token":layui.data(i.tableName).access_token},m=1,p={shade:.3},g=sessionStorage.getItem("saa_key"),_="wxpay";l.render();var v=y+"/merchantConfig?key="+g;s.ajax({url:v+"&config_type="+_,type:"get",async:!1,headers:f,beforeSend:function(){a=layer.load(m,p)},success:function(e){return layer.close(a),e.status==c?(layer.msg(d),r.exit(),!1):200!=e.status?(layer.msg(e.message),!1):(s("input[name=title]").val(e.data.title),s("select[name=pay_type]").val(e.data.pay_type),s("select[name=merchant_type]").val(e.data.merchant_type),s("input[name=APPID]").val(e.data.APPID),s("input[name=MCHID]").val(e.data.MCHID),void s("input[name=pay_key]").val(e.data.pay_key))},error:function(){layer.msg(o),layer.close(a)}}),l.on("submit(sub)",function(l){var i={title:l.field.title,pay_type:l.field.pay_type,merchant_type:l.field.merchant_type,APPID:l.field.APPID,MCHID:l.field.MCHID,pay_key:l.field.pay_key,SSLCERT_PATH:t?t:"",SSLKEY_PATH:n?n:"",config_type:_,key:g};s.ajax({url:v,type:"put",async:!1,data:i,headers:f,beforeSend:function(){a=layer.load(m,p)},success:function(t){return t.status==c?(layer.msg(d),r.exit(),!1):(layer.close(a),200!=t.status?(layer.msg(t.message),!1):(layer.msg(u.put),void layer.close(e)))},error:function(){layer.msg(o),layer.close(a)}})}),s("#SSLCERT_PATH").change(function(){var e=this.files[0];if(window.FileReader){var a=new FileReader;a.readAsDataURL(e),a.onloadend=function(e){t=e.target.result}}e=null}),s("#SSLKEY_PATH").change(function(){var e=this.files[0];if(window.FileReader){var a=new FileReader;a.readAsDataURL(e),a.onloadend=function(e){n=e.target.result}}e=null})}),e("wechat/pay",{})});