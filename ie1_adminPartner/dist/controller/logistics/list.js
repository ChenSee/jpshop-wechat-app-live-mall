/** layuiAdmin.pro-v1.0.0-beta7 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(function(e){layui.use(["table","jquery","form","admin","setter"],function(){var e,a,t,s,r=layui.table,l=layui.$,i=layui.form,o=layui.admin,n=layui.setter,d=n.baseUrl,u=n.successMsg,c=n.errorMsg,m=n.timeOutCode,y=n.timeOutMsg,f={"Access-Token":layui.data(n.tableName).access_token},g=1,p={shade:.3},h=10,x=[10,20,30],b=sessionStorage.getItem("saa_key"),v=d+"/merchantShopExpress",k="?key="+b,w=[{field:"name",title:"快递名称",width:"20%"},{field:"remarks",title:"备注",width:"20%"},{field:"status",title:"状态",width:"20%",templet:"#statusTpl"},{field:"create_time",title:"创建时间",width:"20%"},{field:"operations",title:"操作",toolbar:"#operations",width:"20%"}],N=[{checkbox:!0},{field:"name",title:"快递名称",width:"12%"},{field:"simple_name",title:"缩写",width:"12%"}],_=[],T="";i.on("submit(showAdd)",function(){l("#add_edit_form")[0].reset(),s=r.render({elem:"#expressTable",url:d+"/merchantShopExpressCompany"+k,limit:1e3,loading:!0,cols:[N],response:{statusName:"status",statusCode:"200",dataName:"data"},headers:f,done:function(e){return e.status==m?(layer.msg(y),o.exit(),!1):200!=e.status?(layer.msg(e.message),!1):void 0}}),i.render(),e=layer.open({type:1,title:"新增",content:l("#add_edit_form"),shade:0,offset:"100px",area:["20vw","60vh"]})}),i.on("submit(findExpress)",function(e){s.reload({where:{searchName:e.field.expressName},done:function(e){return e.status==m?(layer.msg(y),o.exit(),!1):200!=e.status?(layer.msg(e.message),!1):void(T=e)}})}),r.on("checkbox(expressTable)",function(e){if("all"==e.type){if(_=[],1==e.checked)for(var a=0;a<T.count;a++)_.push(T.data[a].id)}else if(1==e.checked)_.push(e.data.id);else{var t=_.indexOf(e.data.id);t>-1&&_.splice(t,1)}}),i.on("submit(save)",function(){0==_&&(_=""),l.ajax({url:v+k,type:"post",async:!1,data:{express:_,key:b},headers:f,success:function(t){return t.status==m?(layer.msg(y),o.exit(),!1):(layer.close(a),200!=t.status?(layer.msg(t.message),!1):(layer.msg(u.put),layer.close(e),void S.reload()))},error:function(){layer.msg(c),layer.close(a)},beforeSend:function(){a=layer.load(g,p)}})}),r.on("tool(pageTable)",function(e){var s=e.event;t=e.data.id,"del"===s?layer.confirm("确定要删除这条数据么?",function(t){layer.close(t),l.ajax({url:v+"/"+e.data.id,data:{key:b},type:"delete",async:!1,headers:f,beforeSend:function(){a=layer.load(g,p)},success:function(t){return t.status==m?(layer.msg(y),o.exit(),!1):(layer.close(a),200!=t.status?(layer.msg(t.message),!1):(layer.msg(u["delete"]),void e.del()))},error:function(){layer.msg(c),layer.close(a)}})}):layer.msg(c)});var S=r.render({elem:"#pageTable",url:v+k,page:!0,limit:h,limits:x,loading:!0,cols:[w],response:{statusName:"status",statusCode:"200",dataName:"data"},headers:f,done:function(e){return e.status==m?(layer.msg(y),o.exit(),!1):200!=e.status?(layer.msg(e.message),!1):void 0}});i.on("submit(find)",function(e){S.reload({where:{searchName:e.field.searchName},page:{curr:1}})}),i.on("switch(statusTpl)",function(t){var s=t.elem.checked?1:0;l.ajax({url:v+"/"+this.value,type:"put",async:!1,data:{status:s,key:b},headers:f,success:function(t){return t.status==m?(layer.msg(y),o.exit(),!1):(layer.close(a),200!=t.status?(layer.msg(t.message),!1):(layer.msg(u.put),void layer.close(e)))},error:function(){layer.msg(c),layer.close(a)},beforeSend:function(){a=layer.load(g,p)}})})}),e("logistics/list",{})});