/** layuiAdmin.pro-v1.0.0-beta7 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(function(e){layui.use(["table","jquery","form","admin","setter"],function(){var e,a,t,s,r,l=layui.table,n=layui.$,o=layui.form,d=layui.admin,i=layui.setter,u=i.baseUrl,c=i.successMsg,y=i.errorMsg,f=i.timeOutCode,m=i.timeOutMsg,p={"Access-Token":layui.data(i.tableName).access_token},g=1,h={shade:.3},_=10,v=[10,20,30],b=sessionStorage.getItem("saa_key"),x=u+"/merchantAfterInfo",k="?key="+b,w=[{field:"after_phone",title:"退款电话",width:"20%"},{field:"after_addr",title:"退款地址",width:"20%"},{field:"create_time",title:"创建时间",width:"20%"},{field:"status",title:"状态",width:"20%",templet:"#statusTpl"},{field:"operations",title:"操作",toolbar:"#operations",width:"20%"}];o.on("submit(showAdd)",function(){n("#add_edit_form")[0].reset(),n("input[name='add_edit_status']").prop("checked",!0),n("input[name='app_id']:eq(0)").prop("checked",!0),o.render(),r="post",e=layer.open({type:1,title:"新增",content:n("#add_edit_form"),shade:0,offset:"100px",area:["400px","auto"]})}),o.on("submit(sub)",function(){var l,o=0,i=x;n("input[name=add_edit_status]:checked").val()&&(o=1),"post"==r?t=c.post:"put"==r&&(i=x+"/"+s,t=c.put),l={after_phone:n("input[name=after_phone]").val(),after_addr:n("textarea[name=after_addr]").val(),status:o,key:b},n.ajax({url:i,data:l,type:r,async:!1,headers:p,beforeSend:function(){a=layer.load(g,h)},success:function(s){return s.status==f?(layer.msg(m),d.exit(),!1):(layer.close(a),200!=s.status?(layer.msg(s.message),!1):(layer.msg(t),layer.close(e),n("#add_edit_form")[0].reset(),void j.reload()))},error:function(){layer.msg(y),layer.close(a)}})}),l.on("tool(pageTable)",function(t){var l=t.data,i=t.event;s=l.id,"edit"===i?(r="put",n.ajax({url:x+"/"+l.id+k,type:"get",async:!1,headers:p,success:function(t){return t.status==f?(layer.msg(m),d.exit(),!1):(layer.close(a),200!=t.status?(layer.msg(t.message),!1):(n("input[name=after_phone]").val(t.data.after_phone),n("textarea[name=after_addr]").val(t.data.after_addr),o.render(),void(e=layer.open({type:1,title:"编辑",content:n("#add_edit_form"),shade:0,offset:"100px",area:["400px","auto"]}))))},error:function(){layer.msg(y),layer.close(a)},beforeSend:function(){a=layer.load(g,h)}})):"del"===i?layer.confirm("确定要删除这条数据么?",function(e){layer.close(e),n.ajax({url:x+"/"+l.id,data:{key:b},type:"delete",async:!1,headers:p,beforeSend:function(){a=layer.load(g,h)},success:function(e){return e.status==f?(layer.msg(m),d.exit(),!1):(layer.close(a),200!=e.status?(layer.msg(e.message),!1):(layer.msg(c["delete"]),void t.del()))},error:function(){layer.msg(y),layer.close(a)}})}):layer.msg(y)});var j=l.render({elem:"#pageTable",url:x+k,page:!0,limit:_,limits:v,loading:!0,cols:[w],response:{statusName:"status",statusCode:"200",dataName:"data"},headers:p,done:function(e){return e.status==f?(layer.msg(m),d.exit(),!1):200!=e.status?(layer.msg(e.message),!1):void 0}});o.on("submit(find)",function(e){j.reload({where:{searchName:e.field.searchName},page:{curr:1}})}),o.on("switch(statusTpl)",function(t){var s=t.elem.checked?1:0;n.ajax({url:x+"/"+this.value,type:"put",async:!1,data:{status:s,key:b},headers:p,success:function(t){return t.status==f?(layer.msg(m),d.exit(),!1):(layer.close(a),200!=t.status?(layer.msg(t.message),!1):(layer.msg(c.put),void layer.close(e)))},error:function(){layer.msg(y),layer.close(a)},beforeSend:function(){a=layer.load(g,h)}})})}),e("info/list",{})});